# 中间件
什么是中间件？
介于操作系统和应用程序之间的产品，中间件简单解释，你可以理解为面向信息系统交互，集成过程中的通用部分的集合，屏蔽了底层的通讯，交互，连接等复杂又通用化的功能，以产品的形式提供出来，系统在交互时，直接采用中间件进行连接和交互即可，避免了大量的代码开发和人工成本

# k8s和docker的关系
k8s是容器编排系统，用于管理容器集群，而docker是容器引擎。k8s目前默认的容器引擎已经不再使用docker，但符合其api的docker镜像（大部分现有镜像都行）仍然能够运行。docker也可以脱离k8s单独使用，只要业务不是很复杂

# 同步、异步
IO密集型应用适合异步处理,CPU密集型适合同步处理. 与上面维度正交, 与线程和进程模型无关
## 常用基础中间件
- 路由与web服务器：处理和转发其他服务器通信数据的服务器。 如被业界广泛使用的阿里基于 Nginx 研发的 Tengine、阿里内部的集中式路由服务 VipServer
- RPC框架：微服务时代的远程服务调用框架。如grpc, Thrift, 阿里的 HSF, Dubbo, SOFA-RPC
- 消息中间件：支持在分布式系统之间发送和接收消息的软件。 如 Apache kafka, Apache RabbitMQ, NSQ, 阿里孵化开源的 Apache RocketMQ
- 缓存服务: 分布式的高速数据存储层，一般是内存存储。如 阿里 Tair，业界的 Redis, Memcached, Ehcache
- 配置中心：用来统一管理各个项目中所有配置的系统。如 阿里 Nacos、携程 Apollo、百度 Disconf
- 分布式事务：事务的参与者、支持事务的服务器、资源服务器以及事务管理器分别位于不同的分布式系统的不同节点之上。 如 阿里 seata、腾讯 DTF
- 任务调度：分布式环境下提供定时、任务编排、分布式跑批等功能的系统。如 阿里 SchedulerX、业界 xxl-job、当当 elastic-job、有赞 TSP
- 数据库层 用于支持弹性扩容和分库分表的 TDDL，数据库连接池 Driud, Binlog 同步的 Canal 等。

## 中间件云产品
随着云时代的到来，大量公司的业务向云上迁移；为了云上客户能够便捷的使用稳定高效的中间件能力，云厂商开始将自身沉淀的基础中间件能力云化，用于支撑各个云上客户和自身业务的快速生长。

中间件在服务端运行
部分中间件如果想在客户端运行，包装成一个http服务
# k8s和docker的关系

Docker 是一个容器化平台，而 k8s 是 Docker 等容器平台的协调器。
## 容器化技术的特点

可移植性：不依赖具体的操作系统或云平台，比如在阿里云或腾讯云直接随意迁移。
占地小：容器只需要其应用程序以及它需要运行的所有容器和库的依赖清单，不需要将所有的依赖库都打包在一起。
共享 bin 和 lib：不同的容器可以共享 bin 和 lib，进一步节省了空间。

尽管Docker为容器化的应用程序提供了开放标准，但随着容器越来越多出现了一系列新问题：

* 如何协调和调度这些容器？
* 如何在升级应用程序时不会中断服务？
* 如何监视应用程序的运行状况？
* 如何批量重新启动容器里的程序？
解决这些问题需要容器编排技术，可以将众多机器抽象，对外呈现出一台超大机器。现在业界比较流行的有：k8s、Mesos、Docker Swarm

在业务发展初期只有几个微服务，这时用 Docker 就足够了，但随着业务规模逐渐扩大，容器越来越多，运维人员的工作越来越复杂，这个时候就需要编排系统解救opers。

![](https://pic1.zhimg.com/80/v2-1fad3be8e15d733ce08ee1bc9ff9aaec_720w.webp)
