# websocket协议怎么进行握手
需要首先通过HTTP协议进行握手

客户端发送header中包含Connection: Upgrade, Upgrade: websocket字段的HTTP请求将连接升级成websocket协议。同时传递一个Sec-Websocket-key用于后续验证请求有效性和Websocket版本号

服务端收到请求后，发出状态码为101的响应，同时Header中包含Connection: Upgrade, Upgrade: websocket和Sec-WebSocket-Accept字段，该字段的值是由Websocket-key和另一个专用字符串编码成SHA-1后得到的

# Websocket的特点？websocket怎么进行通信？
1. 全双工通信：WebSocket 允许服务器和客户端可以同时发送和接收信息，使得数据可以即时传输，而无需频繁地打开和关闭连接。
2. 减少通信开销：与传统的 HTTP 连接相比，WebSocket 在建立连接后可以不断重用同一连接，减少了每次交互所需的数据头部和开销。

# 负载均衡策略
1. 轮询(Round Robin)
　　按顺序将请求依次分配给服务器，每个服务器按照顺序依次接收请求。适用于服务器性能相近的情况。

2. 最小连接数(Least Connection)
　　将请求分配给当前连接数最少的服务器，确保负载相对均衡，适用于长连接的场景。

3. 最少响应时间(Least Response Time)
　　将请求分配给响应时间最短的服务器，确保客户端能够获得最快的响应，适用于对响应时间要求较高的场景。

4. IP哈希(IP Hash)
　　根据请求的源IP地址计算哈希值，将同一IP的请求分配给同一台服务器，保证特定客户端的请求都发送到同一服务器，适用于需要会话保持的应用。

5. 加权轮询(Weighted Round Robin)
　　根据服务器的权重值，按比例分配请求，权重高的服务器接收到的请求数更多。

# 守护进程是什么，应用场景
守护进程是运行在后台的一种特殊进程，它独立于控制终端并且周期性地执行某种任务或循环等待处理某些事件的发生；它不需要用户输入就能运行而且提供某种服务

关闭终端，相应的进程都会被关闭，而守护进程却能够突破这种限制

## 应用场景
Web服务器、日志监控、数据库服务器

## 多进程和多线程的区别
进程是资源分配的基本单位，线程是程序运行的基本单位，一个进程可能由多个线程组成。

多进程每个进程相互独立，不影响主程序的稳定性，每个进程各自拥有自己的资源，通常不会发生资源访问冲突的问题。但进程创建和销毁的开销较大

多线程每个线程共享当前进程的资源，可能造成资源访问冲突，但线程的建立和销毁开销较小


## nginx为什么用多进程
因为 Nginx 最核心的一个目的是要保持高可用性、高可靠性，而当 Nginx 如果使用的是多线程结构的时候，因为线程之间是共享同一个地址空间的，所以当某一个第三方模块引发了一个地址空间导致的段错误时、在地址越界出现时，会导致整个 Nginx 进程全部挂掉。而当采用多进程模型时，往往不会出现这样的问题。从上图可以看到 Nginx 在做进程设计时，同样遵循了实现高可用、高可靠这样的一个目的。

这些进程间的通讯，都是使用共享内存来解决的